<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>LIFF Send Message</title>
  <!--
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.1.13/sdk.js"></script>
  最新版本看起來是2.24.0
  -->
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.1.13/sdk.js"></script>
  <script>

   
    function initializeLiff() {
        liff.init({
            liffId: "2006266553-5WQAQkXv", // Use own liffId
          })
          .then(() => {

            /*
            // Start to use liff's api
            document.getElementById("txt_id").value = "LIFF 初始化成功55688";  
            var os = liff.getOS();
            document.getElementById("txt_id").value =  os;  */
            /*
            const accessToken = liff.id;
            document.getElementById("txt_id1").value =  '拿到token : ' + accessToken;
            const isInClient = liff.isInClient()
            document.getElementById("txt_id2").value =  '拿到isInClient(這個要true才行) : ' + isInClient;
            const isisLoggedIn = liff.isLoggedIn()
            document.getElementById("txt_id3").value =  '拿到isisLoggedIn(這個要true才行) : ' + isisLoggedIn;
*/

            

             liff.sendMessages([
                          {
                            type: "text",
                            text: "Hello, World!(LIFF發送訊息by In_Data.html)",
                          },
                        ])
                        .then(() => {
                          console.log("message sent");
                          document.getElementById("txt_id3").value =  '發送成功(sendMessages)';  
                        })
                        .catch((err) => {
                          console.log("error", err);
                          document.getElementById("txt_id3").value =  '發送失敗(sendMessages)' + err;  
                        });

            
            // 取得 URL 中的查詢參數
            const urlParams = new URLSearchParams(window.location.search);
            const message = urlParams.get("message") || "沒訊息";
            
            // 將參數設置到 textarea 的 value 屬性
            document.getElementById("txt_id").value = message;//這邊希望LIFT的URL帶參數過來顯示

          })
          .catch((err) => {
            // Error happens during initialization
            console.log(err.code, err.message);
          });

    }
    window.onload = function () {
      initializeLiff();
    };
  </script>
</head>
<body>
  <h1>LIFF Send Message to Friend 1104</h1>
  <label>傳遞過來的參數：</label></br>
  <textarea  id="txt_id" value="沒訊息"></textarea></br>
  <textarea  id="txt_id1" value="沒訊息"></textarea></br>
  <textarea  id="txt_id2" value="沒訊息"></textarea></br>
  <textarea  id="txt_id3" value="沒訊息"></textarea>
  
</body>
</html>
